MOV EAX EMA
MOV EBX 0x00

;; Fill with red
RED:
INC EBX
MEM EAX 0x01
INC EAX
CMP EBX 0x100
JNE RED

;; Green line
MOV EAX EMA
ADD EAX 0x0f
MOV EBX 0x00
GREEN:
MEM EAX 0x02
ADD EAX 0x0f
INC EBX
CMP EBX 0x10
JNE GREEN

;; Blue line
MOV EAX EMA
MOV EBX 0x00
BLUE:
MEM EAX 0x03
ADD EAX 0x11
INC EBX
CMP EBX 0x10
JNE BLUE

;; Just for test
ADD ECX EAX
SUB ECX EBX

CMP ECX EAX
;; assert false
JE RED

CMP EMA ESP
;; assert true
JNE RED
